@if (mostrar) {
<div class="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
    <div
        class="bg-[var(--bg-elevated)] rounded-xl shadow-2xl w-full max-w-md p-6 animate-fade-in text-[var(--text-primary)]">
        <h2 class="text-xl font-bold mb-4">
            {{ cliente.id ? 'Editar Cliente' : 'Agregar Cliente' }}
        </h2>

        <form [formGroup]="form" (ngSubmit)="guardar()" class="space-y-4">
            @for (campo of campos; track campo.name) {
            <div>
                <label [for]="campo.name" class="block mb-1 font-medium text-[var(--text-secondary)]">
                    {{ campo.label }}
                </label>

                @if (campo.type === 'textarea') {
                <textarea [id]="campo.name" [formControlName]="campo.name" [placeholder]="campo.placeholder"
                    class="w-full px-4 py-2 rounded-lg border text-[var(--text-primary)] border-[var(--border-default)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition"></textarea>
                } @else {
                <input [type]="campo.type" [id]="campo.name" [formControlName]="campo.name"
                    [placeholder]="campo.placeholder"
                    class="w-full px-4 py-2 rounded-lg border text-[var(--text-primary)] border-[var(--border-default)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent transition" />
                }

                <!-- Mostrar mensajes detallados de error -->
                @if (campoInvalido(campo.name)) {
                <ul class="mt-1 space-y-0.5">
                    @for (errorKey of errorKeys(campo.name); track errorKey) {
                    <li class="text-sm text-[var(--danger)]">
                        {{ campo.validationMessages?.[errorKey] ?? 'Campo inv√°lido' }}
                    </li>
                    }
                </ul>
                }
            </div>
            }
            <!--Seccion de botones -->
            <div class="flex justify-end gap-2 pt-2">
                <button type="button" (click)="cancelar.emit()"
                    class="px-4 py-2 rounded-lg bg-[var(--bg-muted)] text-[var(--text-primary)] hover:bg-[var(--border-default)] transition">
                    Cancelar
                </button>
                <button type="submit"
                    class="px-4 py-2 rounded-lg bg-[var(--accent)] text-white hover:bg-[var(--accent-hover)] transition">
                    {{ cliente.id ? 'Actualizar' : 'Agregar' }}
                </button>
            </div>
        </form>

    </div>
</div>
}